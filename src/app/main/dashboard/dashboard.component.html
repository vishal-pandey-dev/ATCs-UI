<div class="flex flex-col flex-auto w-full">

    <div class="flex flex-wrap w-full max-w-screen-xl mx-auto p-6 md:p-8">
        <div class="flex items-center justify-between w-full">
            <div>
                <div class="text-3xl font-semibold tracking-tight leading-8">Analytics dashboard</div>
                <!-- <div class="font-medium tracking-tight text-secondary">Monitor metrics, check reports and review performance</div> -->
            </div>
        </div>
            
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 w-full mt-8">

            <div class="sm:col-span-2 lg:col-span-1 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden ">
                <div class="flex items-start justify-between m-6 mb-0">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Available Nodes</div>
                    
                    <div class="bottom-0 right-0 w-24 h-6 -m-6">
                        <mat-icon
                            class="icon-size-24 opacity-25 text-green-500 dark:text-green-400"
                            [svgIcon]="'heroicons_outline:server-stack'"></mat-icon>
                    </div>
                </div>
                <div class="text-7xl font-bold tracking-tighter mx-6 mt-3 leading-tight">{{ availableNodes }}
                </div>
                <!-- <div class="text-lg font-medium tracking-tight leading-6 mx-6 mt-3 truncate">Incidents</div> -->
                <!-- <div class="flex flex-col lg:flex-row lg:items-center mx-6 mt-3 gap-8">
                    
                    <div class="flex lg:flex-col lg:ml-3">
                        <div class="flex items-center ml-1 lg:ml-0 lg:mt-0.5 text-md leading-none whitespace-nowrap">
                            <span class="font-medium text-red-500">00</span>
                            <span class="ml-1">Opened</span>
                        </div>
                        <div class="flex items-center ml-1 lg:ml-0 lg:mt-0.5 text-md leading-none whitespace-nowrap">
                            <span class="font-medium text-red-500">00</span>
                            <span class="ml-1">Resolved</span>
                        </div>
                    </div>
                    <div class="flex lg:flex-col lg:ml-3">
                        <div class="flex items-center ml-1 lg:ml-0 lg:mt-0.5 text-md leading-none whitespace-nowrap">
                            <span class="font-medium text-red-500 text-7xl">00</span>
                            <span class="ml-1">Unresolved</span>
                        </div>
                    </div>
                </div> -->
                <div class="flex flex-col flex-auto h-10">
                    
                </div>
            </div>
        </div>

        <div class="flex w-full">
            <div class="mt-8">
                <div class="-my-3 divide-y">
                    <div class="flex py-3 gap-8">
                        <div class="text-lg font-medium tracking-tight leading-6 truncate">Resource Utilisation :</div>
                        
                        <div class="flex items-center">
                            <div
                                class="flex-0 w-3 h-3 rounded-full" style="background-color: #39811D;"></div>
                            <div class="ml-3 truncate">0%-50%</div>
                        </div>
                        <div class="flex items-center">
                            <div
                                class="flex-0 w-3 h-3 rounded-full" style="background-color: #90EE90;"></div>
                            <div class="ml-3 truncate">50%-75%</div>
                        </div>
                        <div class="flex items-center">
                            <div
                                class="flex-0 w-3 h-3 rounded-full" style="background-color: #F4A540;"></div>
                            <div class="ml-3 truncate">75%-90%</div>
                        </div>
                        <div class="flex items-center">
                            <div
                                class="flex-0 w-3 h-3 rounded-full" style="background-color: #ED3833;"></div>
                            <div class="ml-3 truncate">>90%</div>
                        </div>
                        <!-- <div class="font-medium text-right">{{data.newVsReturning.uniqueVisitors * dataset / 100 | number:'1.0-0'}}</div>
                        <div class="text-right text-secondary">{{dataset}}%</div> -->
                    </div>
                </div>
            </div>
        </div>

        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 w-full mt-6 md:mt-8">
            
            <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden p-6">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Total CPU</div>
                </div>
                <div class="flex flex-col flex-auto mt-6 h-44">
                    <apx-chart
                        class="flex flex-auto items-center justify-center w-full h-full"
                        [chart]="donutChartOptions?.chart"
                        [colors]="donutChartOptions?.colors"
                        [labels]="totalCPUStats?.labels"
                        [plotOptions]="donutChartOptions?.plotOptions"
                        [series]="totalCPUStats?.series"
                        [states]="donutChartOptions?.states"
                        [tooltip]="donutChartOptions?.tooltip">
                    </apx-chart>
                </div>
                <div class="mt-8">
                    <div class="-my-3 divide-y">
                        <div class="grid grid-cols-3 py-3">
                            <div class="flex items-center">
                                <div
                                    class="flex-0 w-2 h-2 rounded-full" style="background-color: #39811D;"></div>
                                <div class="ml-3 truncate">0%-50%</div>
                            </div>
                            <div class="font-medium text-right"></div>
                            <div class="text-right text-secondary">{{ totalCPUStats?.labels[0] }}</div>
                        </div>
                        <div class="grid grid-cols-3 py-3">
                            <div class="flex items-center">
                                <div
                                    class="flex-0 w-2 h-2 rounded-full" style="background-color: #90EE90;"></div>
                                <div class="ml-3 truncate">50%-75%                                    </div>
                            </div>
                            <div class="font-medium text-right"></div>
                            <div class="text-right text-secondary">{{ totalCPUStats?.labels[1] }}</div>
                        </div>
                        <div class="grid grid-cols-3 py-3">
                            <div class="flex items-center">
                                <div
                                    class="flex-0 w-2 h-2 rounded-full" style="background-color: #F4A540;"></div>
                                <div class="ml-3 truncate">75%-90%</div>
                            </div>
                            <div class="font-medium text-right"></div>
                            <div class="text-right text-secondary">{{ totalCPUStats?.labels[2] }}</div>
                        </div>
                        <div class="grid grid-cols-3 py-3">
                            <div class="flex items-center">
                                <div
                                    class="flex-0 w-2 h-2 rounded-full" style="background-color: #ED3833;"></div>
                                <div class="ml-3 truncate">>90%</div>
                            </div>
                            <div class="font-medium text-right"></div>
                            <div class="text-right text-secondary">{{ totalCPUStats?.labels[3] }}</div>
                        </div>
                    </div>
                </div>
            </div>

                <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden p-6">
                    <div class="flex items-start justify-between">
                        <div class="text-lg font-medium tracking-tight leading-6 truncate">Total RAM</div>
                    </div>
                    <div class="flex flex-col flex-auto mt-6 h-44">
                        <apx-chart
                            class="flex flex-auto items-center justify-center w-full h-full"
                            [chart]="donutChartOptions?.chart"
                            [colors]="donutChartOptions?.colors"
                            [labels]="totalRAMStats?.labels"
                            [plotOptions]="donutChartOptions?.plotOptions"
                            [series]="totalRAMStats?.series"
                            [states]="donutChartOptions?.states"
                            [tooltip]="donutChartOptions?.tooltip">
                        </apx-chart>
                    </div>
                    <div class="mt-8">
                        <div class="-my-3 divide-y">
                            <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center">
                                    <div
                                        class="flex-0 w-2 h-2 rounded-full" style="background-color: #39811D;"></div>
                                    <div class="ml-3 truncate">0%-50%</div>
                                </div>
                                <div class="font-medium text-right"></div>
                                <div class="text-right text-secondary">{{ totalRAMStats?.labels[0] }}</div>
                            </div>
                            <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center">
                                    <div
                                        class="flex-0 w-2 h-2 rounded-full" style="background-color: #90EE90;"></div>
                                    <div class="ml-3 truncate">50%-75%                                    </div>
                                </div>
                                <div class="font-medium text-right"></div>
                                <div class="text-right text-secondary">{{ totalRAMStats?.labels[1] }}</div>
                            </div>
                            <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center">
                                    <div
                                        class="flex-0 w-2 h-2 rounded-full" style="background-color: #F4A540;"></div>
                                    <div class="ml-3 truncate">75%-90%</div>
                                </div>
                                <div class="font-medium text-right"></div>
                                <div class="text-right text-secondary">{{ totalRAMStats?.labels[2] }}</div>
                            </div>
                            <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center">
                                    <div
                                        class="flex-0 w-2 h-2 rounded-full" style="background-color: #ED3833;"></div>
                                    <div class="ml-3 truncate">>90%</div>
                                </div>
                                <div class="font-medium text-right"></div>
                                <div class="text-right text-secondary">{{ totalRAMStats?.labels[3] }}</div>
                            </div>
                        </div>
                    </div>
                </div>

            <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden p-6">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Total Disk</div>
                </div>
                <div class="flex flex-col flex-auto mt-6 h-44">
                    <apx-chart
                        class="flex flex-auto items-center justify-center w-full h-full"
                        [chart]="donutChartOptions?.chart"
                        [colors]="donutChartOptions?.colors"
                        [labels]="totalDiskStats?.labels"
                        [plotOptions]="donutChartOptions?.plotOptions"
                        [series]="totalDiskStats?.series"
                        [states]="donutChartOptions?.states"
                        [tooltip]="donutChartOptions?.tooltip"
                        ></apx-chart>
                </div>
                <div class="mt-8">
                    <div class="-my-3 divide-y">
                        <div class="grid grid-cols-3 py-3">
                            <div class="flex items-center">
                                <div
                                    class="flex-0 w-2 h-2 rounded-full" style="background-color: #39811D;"></div>
                                <div class="ml-3 truncate">0%-50%</div>
                            </div>
                            <div class="font-medium text-right"></div>
                            <div class="text-right text-secondary">{{ totalDiskStats?.labels[0] }}</div>
                        </div>
                        <div class="grid grid-cols-3 py-3">
                            <div class="flex items-center">
                                <div
                                    class="flex-0 w-2 h-2 rounded-full" style="background-color: #90EE90;"></div>
                                <div class="ml-3 truncate">50%-75%                                    </div>
                            </div>
                            <div class="font-medium text-right"></div>
                            <div class="text-right text-secondary">{{ totalDiskStats?.labels[1] }}</div>
                        </div>
                        <div class="grid grid-cols-3 py-3">
                            <div class="flex items-center">
                                <div
                                    class="flex-0 w-2 h-2 rounded-full" style="background-color: #F4A540;"></div>
                                <div class="ml-3 truncate">75%-90%</div>
                            </div>
                            <div class="font-medium text-right"></div>
                            <div class="text-right text-secondary">{{ totalDiskStats?.labels[2] }}</div>
                        </div>
                        <div class="grid grid-cols-3 py-3">
                            <div class="flex items-center">
                                <div
                                    class="flex-0 w-2 h-2 rounded-full" style="background-color: #ED3833;"></div>
                                <div class="ml-3 truncate">>90%</div>
                            </div>
                            <div class="font-medium text-right"></div>
                            <div class="text-right text-secondary">{{ totalDiskStats?.labels[3] }}</div>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>

        
    </div>



        <div id="chart" class="bg-card relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card rounded-2xl shadow overflow-hidden mt-6 md:mt-8 m-6">
            <div class="text-lg font-medium text-blue-600 dark:text-blue-500">Nodes Status</div>
            <apx-chart
              [series]="serverStats.series"
              [chart]="bargraphOptions.chart"
              [dataLabels]="bargraphOptions.dataLabels"
              [plotOptions]="bargraphOptions.plotOptions"
              [yaxis]="bargraphOptions.yaxis"
              [legend]="bargraphOptions.legend"
              [fill]="bargraphOptions.fill"
              [stroke]="bargraphOptions.stroke"
              [tooltip]="bargraphOptions.tooltip"
              [xaxis]="serverStats.xaxis"
            ></apx-chart>
          </div>


    <!-- <div class="grid grid-cols-1 xl:grid-cols-2 gap-8 mt-8 mt-6 md:mt-8 m-6">

        <div id="chart" class="bg-card relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card rounded-2xl shadow overflow-hidden ">
            <div class="text-lg font-medium text-blue-600 dark:text-blue-500">Website Status</div>
            <apx-chart
              [series]="bargraphOptions.series"
              [chart]="bargraphOptions.chart"
              [dataLabels]="bargraphOptions.dataLabels"
              [plotOptions]="bargraphOptions.plotOptions"
              [yaxis]="bargraphOptions.yaxis"
              [legend]="bargraphOptions.legend"
              [fill]="bargraphOptions.fill"
              [stroke]="bargraphOptions.stroke"
              [tooltip]="bargraphOptions.tooltip"
              [xaxis]="bargraphOptions.xaxis"
            ></apx-chart>
          </div>

          <div id="chart" class="bg-card relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card rounded-2xl shadow overflow-hidden">
            <div class="text-lg font-medium text-blue-600 dark:text-blue-500">Check Status</div>
            <apx-chart
              [series]="bargraphOptions.series"
              [chart]="bargraphOptions.chart"
              [dataLabels]="bargraphOptions.dataLabels"
              [plotOptions]="bargraphOptions.plotOptions"
              [yaxis]="bargraphOptions.yaxis"
              [legend]="bargraphOptions.legend"
              [fill]="bargraphOptions.fill"
              [stroke]="bargraphOptions.stroke"
              [tooltip]="bargraphOptions.tooltip"
              [xaxis]="bargraphOptions.xaxis"
            ></apx-chart>
          </div>
    </div> -->
    
    <div class="flex m-6 grid-cols-1 xl:grid-cols-3 gap-8 mt-8">
        <div class="xl:col-span-2 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
            <div class="p-6">
                <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate">Nodes</div>
                <!-- <div class="text-secondary font-medium">1 pending, 4 completed</div> -->
            </div>
            <div class="overflow-x-auto mx-6">
                <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
                    <!-- IP ADDRESS COLUMN -->
                    <ng-container matColumnDef="ip_address">
                      <th mat-header-cell *matHeaderCellDef>
                        IP Address
                      </th>
                      <td mat-cell *matCellDef="let node">
                        <a [routerLink]="[node?.id]">{{ node.ip_address }}</a>
                      </td>
                    </ng-container>
                  
                    <!-- HOSTNAME COLUMN -->
                    <ng-container matColumnDef="hostname">
                        <th mat-header-cell *matHeaderCellDef>
                            Hostname
                        </th>
                        <td mat-cell *matCellDef="let node">
                          {{ node.server_info.operating_system.name.uname }}
                        </td>
                    </ng-container>

                    <!-- OPERATING SYSTEM COLUMN -->
                    <ng-container matColumnDef="operating_system">
                        <th mat-header-cell *matHeaderCellDef>
                            OS
                        </th>
                        <td mat-cell *matCellDef="let node">
                          {{ node.server_info.operating_system.name.pretty }}
                        </td>
                    </ng-container>

                    <!-- CPU USAGE COLUMN -->
                    <ng-container matColumnDef="cpu_usage">
                        <th mat-header-cell *matHeaderCellDef>
                            CPU Usage
                        </th>
                        <td mat-cell *matCellDef="let node">
                          {{ node.server_info.cpu.usage.total.percent }}%
                        </td>
                    </ng-container>

                    <!-- RAM USAGE COLUMN -->
                    <ng-container matColumnDef="ram_usage">
                        <th mat-header-cell *matHeaderCellDef>
                            RAM Usage
                        </th>
                        <td mat-cell *matCellDef="let node">
                          {{ node.server_info.memory.virtual.percent }}%
                        </td>
                    </ng-container>

                    <!-- DISK USAGE COLUMN -->
                    <ng-container matColumnDef="disk_usage">
                        <th mat-header-cell *matHeaderCellDef>
                            Disk Usage
                        </th>
                        <td mat-cell *matCellDef="let node">
                            {{ disk_usage_percent }}%
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayColumns;"></tr>
                </table>
            </div>
        </div>
    </div>

</div>